<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="UTF-8">

<!-- Begin Jekyll SEO tag v2.3.0 -->
<title>AVL Trees | VibhorKanojia.github.io</title>
<meta property="og:title" content="AVL Trees" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="&lt;!DOCTYPE HTML&gt; AVL Trees" />
<meta property="og:description" content="&lt;!DOCTYPE HTML&gt; AVL Trees" />
<link rel="canonical" href="http://localhost:4000/datastructures/avltree.html" />
<meta property="og:url" content="http://localhost:4000/datastructures/avltree.html" />
<meta property="og:site_name" content="VibhorKanojia.github.io" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2018-03-18T00:00:00+05:30" />
<script type="application/ld+json">
{"name":null,"description":"&lt;!DOCTYPE HTML&gt; AVL Trees","author":null,"@type":"BlogPosting","url":"http://localhost:4000/datastructures/avltree.html","publisher":null,"image":null,"headline":"AVL Trees","dateModified":"2018-03-18T00:00:00+05:30","datePublished":"2018-03-18T00:00:00+05:30","sameAs":null,"mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/datastructures/avltree.html"},"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->

    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="theme-color" content="#157878">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="stylesheets/style.css?v=6e63aa90bc14416808889af9f27803b70ea231ec">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">AVL Trees</h1>
      <h2 class="project-tagline"></h2>
    </section>
   
    <div>

    <section style="float:left" class="main-content">
      <!DOCTYPE HTML>
<html>
<head>
<title> AVL Trees</title>
</head>
<body>

<h3> Introduction </h3>
<p>Binary Trees provide O(logN) average case time complexity for insert, delete, and search operations. But depending upon the order of insert, we might form an unbalanced tree which makes the time complexity linear. AVL Trees are self-balancing binary trees that can guarantee O(logN) time complexity even in the worst case. The only drawback is that the structure of the tree changes as we add more and more nodes. </p> 

<h3> Specifics </h3>

<p>An AVL tree has all the properties of a normal binary tree. But in order to keep the tree balanced, an AVL tree has the following extra properties:</p>
<ol>
    <li> The sub-trees of every node differ in height by at most one </li>
    <li> Every sub-tree is an AVL tree </li>
</ol>

Every time the insertion or deletion of a node violates these properties, it changes the structure to make itself balanced.

<h3> Complexities </h3>
<table>
  <tr>
    <th> Operation </th>
    <th>Time Complexity (Average Case)</th>
    <th>Time Complexity (Worst case)</th>
  </tr>
  <tr>
    <td> Insertion</td>
    <td>O(logN)</td>
    <td>O(logN)</td>
  </tr>
  <tr>
    <td> Deletion</td>
    <td>O(logN)</td>
    <td>O(logN)</td>
  </tr>
  <tr>
    <td> Search</td>
    <td>O(logN)</td>
    <td>O(logN)</td>
  </tr>
</table>

<h3> Implementation </h3>
<p>w -> Last node that was inserted.<br>
z -> Starting from w and going up, the first node that is unbalanced.<br>
y -> Child of z which is in the direction of w.<br>
x -> Child of y which is in the direction of w.</p>

<p>While performing a standard BST insertion of w, we can encounter four cases that violate the properties of an AVL tree:</p>




<figure class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="k">struct</span> <span class="n">Node</span><span class="p">{</span>
    <span class="kt">int</span> <span class="n">key</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">height</span><span class="p">;</span>
    <span class="n">Node</span> <span class="o">*</span> <span class="n">left</span><span class="p">;</span>
    <span class="n">Node</span> <span class="o">*</span> <span class="n">right</span><span class="p">;</span>
    
    <span class="n">Node</span><span class="p">(</span><span class="kt">int</span> <span class="n">key</span><span class="p">){</span>
        <span class="k">this</span><span class="o">-&gt;</span><span class="n">key</span> <span class="o">=</span> <span class="n">key</span><span class="p">;</span>
        <span class="k">this</span><span class="o">-&gt;</span><span class="n">height</span><span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="n">left</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
        <span class="n">right</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">};</span>


<span class="kt">int</span> <span class="n">getHeight</span><span class="p">(</span><span class="n">Node</span> <span class="o">*</span> <span class="n">root</span><span class="p">){</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">root</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span> <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
    <span class="k">else</span> <span class="k">return</span> <span class="n">root</span><span class="o">-&gt;</span><span class="n">height</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="n">rotateRight</span><span class="p">(</span><span class="n">Node</span> <span class="o">*</span> <span class="n">z</span><span class="p">){</span>
    <span class="n">Node</span> <span class="o">*</span> <span class="n">y</span> <span class="o">=</span> <span class="n">z</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">;</span>
    <span class="n">z</span><span class="o">-&gt;</span><span class="n">left</span> <span class="o">=</span> <span class="n">y</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">;</span>
    <span class="n">y</span><span class="o">-&gt;</span><span class="n">right</span> <span class="o">=</span> <span class="n">z</span><span class="p">;</span>

    <span class="n">z</span><span class="o">-&gt;</span><span class="n">height</span> <span class="o">=</span> <span class="n">max</span><span class="p">(</span><span class="n">getHeight</span><span class="p">(</span><span class="n">z</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">),</span> <span class="n">getHeight</span><span class="p">(</span><span class="n">z</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">))</span> <span class="o">+</span><span class="mi">1</span><span class="p">;</span>
    <span class="n">y</span><span class="o">-&gt;</span><span class="n">height</span> <span class="o">=</span> <span class="n">max</span><span class="p">(</span><span class="n">getHeight</span><span class="p">(</span><span class="n">y</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">),</span> <span class="n">getHeight</span><span class="p">(</span><span class="n">y</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">))</span> <span class="o">+</span><span class="mi">1</span><span class="p">;</span>
    <span class="k">return</span> <span class="n">y</span><span class="p">;</span>
<span class="p">}</span>



<span class="kt">void</span> <span class="n">rotateLeft</span><span class="p">(</span><span class="n">Node</span> <span class="o">*</span> <span class="n">z</span><span class="p">){</span>
    <span class="n">Node</span> <span class="o">*</span> <span class="n">y</span> <span class="o">=</span> <span class="n">z</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">;</span>
    <span class="n">z</span><span class="o">-&gt;</span><span class="n">right</span> <span class="o">=</span> <span class="n">y</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">;</span>
    <span class="n">y</span><span class="o">-&gt;</span><span class="n">left</span> <span class="o">=</span> <span class="n">z</span><span class="p">;</span>

    <span class="n">z</span><span class="o">-&gt;</span><span class="n">height</span> <span class="o">=</span> <span class="n">max</span><span class="p">(</span><span class="n">getHeight</span><span class="p">(</span><span class="n">z</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">),</span> <span class="n">getHeight</span><span class="p">(</span><span class="n">z</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">))</span> <span class="o">+</span><span class="mi">1</span><span class="p">;</span>
    <span class="n">y</span><span class="o">-&gt;</span><span class="n">height</span> <span class="o">=</span> <span class="n">max</span><span class="p">(</span><span class="n">getHeight</span><span class="p">(</span><span class="n">y</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">),</span> <span class="n">getHeight</span><span class="p">(</span><span class="n">y</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">))</span> <span class="o">+</span><span class="mi">1</span><span class="p">;</span>
    <span class="k">return</span> <span class="n">y</span><span class="p">;</span>
<span class="p">}</span>


<span class="n">Node</span> <span class="o">*</span> <span class="n">insert</span><span class="p">(</span><span class="n">Node</span> <span class="o">*</span> <span class="n">root</span><span class="p">,</span> <span class="kt">int</span> <span class="n">val</span><span class="p">){</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">root</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span> <span class="k">return</span> <span class="k">new</span> <span class="n">Node</span><span class="p">(</span><span class="n">val</span><span class="p">);</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">root</span><span class="o">-&gt;</span><span class="n">key</span> <span class="o">&gt;=</span> <span class="n">val</span><span class="p">)</span> <span class="n">root</span><span class="o">-&gt;</span><span class="n">left</span> <span class="o">=</span> <span class="n">insert</span><span class="p">(</span><span class="n">root</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">,</span> <span class="n">val</span><span class="p">,</span> <span class="n">root</span><span class="p">);</span>

    <span class="k">else</span> <span class="n">root</span><span class="o">-&gt;</span><span class="n">right</span> <span class="o">=</span> <span class="n">insert</span><span class="p">(</span><span class="n">root</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">,</span> <span class="n">val</span><span class="p">,</span> <span class="n">root</span><span class="p">);</span>

    <span class="n">root</span><span class="o">-&gt;</span><span class="n">height</span> <span class="o">=</span> <span class="n">max</span><span class="p">(</span><span class="n">getHeight</span><span class="p">(</span><span class="n">root</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">),</span> <span class="n">getHeight</span><span class="p">(</span><span class="n">root</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">))</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>

    <span class="kt">int</span> <span class="n">difference</span> <span class="o">=</span> <span class="n">getHeight</span><span class="p">(</span><span class="n">root</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">)</span> <span class="o">-</span> <span class="n">getHeight</span><span class="p">(</span><span class="n">root</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">);</span>

    <span class="c1">//LL case
</span>    <span class="k">if</span> <span class="p">(</span><span class="n">difference</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="n">val</span> <span class="o">&lt;=</span> <span class="p">(</span><span class="n">root</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">key</span><span class="p">){</span>
        <span class="n">root</span> <span class="o">=</span> <span class="n">rotateRight</span><span class="p">(</span><span class="n">root</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="c1">//LR case
</span>    <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">difference</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="n">val</span> <span class="o">&gt;</span> <span class="p">(</span><span class="n">root</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">key</span><span class="p">){</span>
        <span class="n">root</span><span class="o">-&gt;</span><span class="n">left</span> <span class="o">=</span> <span class="n">rotateLeft</span><span class="p">(</span><span class="n">root</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">);</span>
        <span class="n">root</span> <span class="o">=</span> <span class="n">rotateRight</span><span class="p">(</span><span class="n">root</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="c1">//RR case
</span>    <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">difference</span> <span class="o">&lt;</span> <span class="o">-</span><span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="n">val</span> <span class="o">&gt;</span> <span class="p">(</span><span class="n">root</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">key</span><span class="p">){</span>
        <span class="n">root</span><span class="o">=</span> <span class="n">rotateLeft</span><span class="p">(</span><span class="n">root</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="c1">//RL case
</span>    <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">difference</span> <span class="o">&lt;</span> <span class="o">-</span><span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="n">val</span> <span class="o">&lt;=</span> <span class="p">(</span><span class="n">root</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">key</span><span class="p">){</span>
        <span class="n">root</span><span class="o">-&gt;</span><span class="n">right</span> <span class="o">=</span> <span class="n">rotateRight</span><span class="p">(</span><span class="n">root</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">);</span>
        <span class="n">root</span> <span class="o">=</span> <span class="n">rotateLeft</span><span class="p">(</span><span class="n">root</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="n">root</span><span class="p">;</span>
<span class="p">}</span>

<span class="n">Node</span> <span class="o">*</span> <span class="n">search</span><span class="p">(</span><span class="n">Node</span> <span class="o">*</span> <span class="n">root</span><span class="p">,</span> <span class="kt">int</span> <span class="n">val</span><span class="p">){</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">root</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span> <span class="k">return</span> <span class="nb">NULL</span><span class="p">;</span>
    
    <span class="k">if</span> <span class="p">(</span><span class="n">root</span><span class="o">-&gt;</span><span class="n">key</span> <span class="o">==</span> <span class="n">val</span><span class="p">)</span> <span class="k">return</span> <span class="n">root</span><span class="p">;</span>
    
    <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">root</span><span class="o">-&gt;</span><span class="n">key</span> <span class="o">&gt;</span> <span class="n">val</span><span class="p">)</span> <span class="k">return</span> <span class="n">search</span><span class="p">(</span><span class="n">root</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">,</span> <span class="n">val</span><span class="p">);</span>
    
    <span class="k">else</span> <span class="k">return</span> <span class="n">search</span><span class="p">(</span><span class="n">root</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">,</span> <span class="n">val</span><span class="p">);</span>
<span class="p">}</span></code></pre></figure>

<h3> Problems </h3>

</body>
</html>

    </section>
    
    <section style="float:right" class="main-content">
      
        <ul>
            
            <li>
                <a href="/content/ds.html">Basic Data Structures</a>
            </li>
            
            <li>
                <a href="/content/algo.html">Algorithms</a>
            </li>
            
            <li>
                <a href="/content/problems.html">Problems</a>
            </li>
            
            <li>
                <a href="/content/pvsnp.html">P vs NP</a>
            </li>
            
        </ul>
    </section>

      <footer class="site-footer">
        
          <span class="site-footer-owner"><a href="http://github.com/VibhorKanojia/VibhorKanojia.github.io">VibhorKanojia.github.io</a> is maintained by <a href="http://github.com/VibhorKanojia">VibhorKanojia</a>.</span>
        
        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a>.</span>
      </footer>

    </div>

    
  </body>
</html>
